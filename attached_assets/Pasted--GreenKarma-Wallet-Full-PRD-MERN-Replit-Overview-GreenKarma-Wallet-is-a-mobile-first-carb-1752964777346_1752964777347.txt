ğŸ“ GreenKarma Wallet â€“ Full PRD (MERN + Replit)
ğŸŒ Overview
GreenKarma Wallet is a mobile-first carbon credit reward platform for EV drivers, allowing them to:

Upload odometer readings using a live camera

Get rewarded based on COâ‚‚ saved

View wallet balance and history

Have readings validated on blockchain

Use the app in English or Hindi

Built entirely on the MERN stack, hosted on Replit

ğŸ§± Tech Stack
Layer	Tech
Frontend	React.js (mobile-first PWA) + Tailwind CSS + getUserMedia()
Backend	Node.js + Express.js
Database	MongoDB (Atlas)
Blockchain	Ethereum-compatible (Polygon or testnet)
OCR	Tesseract.js (or Google Vision API via backend call)
ML	Python microservice (via Flask or TensorFlow.js) OR JS fallback
Deployment	Replit (Frontend + Backend in monorepo)

ğŸ“² User Flows
ğŸ”“ Registration / Skip Flow
Route: /register

Inputs:

Name

Phone

Vehicle Number

RC (captured via live camera)

API: POST /api/register

Stores user in MongoDB

Adds vehicle number to blockchain for uniqueness

Skip button: leads directly to /wallet (with upload/rewards disabled)

ğŸ“¸ Odometer Upload
Route: /upload

Capture odometer via camera (live only)

Inputs:

Vehicle number (autofilled from profile)

Live image (base64)

Optional: Manual KM if OCR fails

API: POST /api/upload-odometer

Backend:

OCR reads KM from image

Compares with last KM (from blockchain & DB)

Prevents duplicate rewards

Calculates COâ‚‚ saved

Applies ML model (or fallback 40%) to calculate â‚¹ reward

Stores reward in DB + logs to blockchain

ğŸ’¼ Wallet
Route: /wallet

Shows:

Current Balance (â‚¹)

Total COâ‚‚ saved (kg)

Vehicle ID

Monthly reward

Total distance

Recent activity

â€œEco Warriorâ€ badge

Withdraw button â†’ â€œComing Soonâ€ (disabled)

ğŸ“œ Reward History
Route: /history

Displays:

Date

KM reading

COâ‚‚ saved

â‚¹ rewarded

Captured image

txHash (linked to block explorer)

ğŸ§‘â€ğŸ’¼ Admin Panel (optional)
Route: /admin

Protected by JWT

View all users, filter data, export to CSV

ğŸ§ª UI Components (Mobile-First)
Navigation Tabs (Bottom Nav):
Wallet /wallet (default landing page)

Upload /upload

History /history

Profile /profile

Theme:
Soft green gradients

Rounded cards (Tailwind: rounded-2xl, shadow-md)

Language toggle on header (EN/HI)

ğŸŒ Multilingual Support
Use react-i18next with two locales:

/locales/en.json

/locales/hi.json

Translatable keys:

Buttons, labels, activity logs, alerts

ğŸ§  Backend API Endpoints (Express.js)
User Registration
http
Copy
Edit
POST /api/register
Body: { name, phone, vehicle_number, rc_image_base64 }
Upload Odometer Image
http
Copy
Edit
POST /api/upload-odometer
Body: { vehicle_number, odometer_image_base64, [optional_km] }
Get Reward History
http
Copy
Edit
GET /api/reward-history?vehicle=ABC123
ğŸ§¾ MongoDB Schemas
User
js
Copy
Edit
{
  name: String,
  phone: String,
  vehicle_number: String,
  rc_image_url: String,
  registered_at: Date
}
Reward
js
Copy
Edit
{
  vehicle_number: String,
  odometer_img_url: String,
  km: Number,
  co2_saved: Number,
  reward_given: Number,
  tx_hash: String,
  timestamp: Date
}
ğŸ”— Blockchain Logging
Smart Contract (Polygon Mumbai)

Logs:

vehicle_number

km_reading

timestamp

txHash

Contract exposes:

getLastKm(vehicle_number)

logReading(vehicle_number, km, timestamp)

ğŸ¤– ML Reward Logic
Uses input:

COâ‚‚ saved

Market price (â‚¹ per ton)

Output:

30â€“60% of value

Ensures 30% profit margin

Fallback (if offline): flat 40% of COâ‚‚ credit value

ğŸ“ Suggested File Structure
bash
Copy
Edit
greenkarma-wallet/
â”œâ”€â”€ client/                # React frontend
â”‚   â”œâ”€â”€ components/        # Navbar, CameraCapture, etc.
â”‚   â”œâ”€â”€ locales/           # en.json, hi.json
â”‚   â”œâ”€â”€ pages/             # Wallet, Upload, History, Register
â”‚   â””â”€â”€ App.jsx            # Routes
â”œâ”€â”€ server/                # Express backend
â”‚   â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ utils/             # OCR, ML, blockchain
â”‚   â””â”€â”€ index.js
â”œâ”€â”€ smart-contracts/       # Solidity files (optional)
â”œâ”€â”€ README.md
âœ… Replit Configuration
React + Express (Monorepo):
In Replit â†’ Create a Node.js Repl

Set up concurrently to run both client & server:

bash
Copy
Edit
npm install concurrently nodemon --save-dev
Add start script:

json
Copy
Edit
"scripts": {
  "client": "cd client && npm start",
  "server": "cd server && nodemon index.js",
  "dev": "concurrently \"npm run client\" \"npm run server\""
}
Use Replit secrets for API keys and Mongo URI:

MONGO_URI

VISION_API_KEY

PRIVATE_KEY (for blockchain)

ğŸ¯ MVP Scope
âœ… Registration + Skip
âœ… Odometer Upload (camera only)
âœ… OCR + Manual fallback
âœ… COâ‚‚ + â‚¹ Calculation
âœ… Wallet UI
âœ… Reward history
âœ… Blockchain logging
âœ… Language toggle
âœ… Mobile-first responsive design